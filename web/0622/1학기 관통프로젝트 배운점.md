# 1. 1학기 관통프로젝트 배운점

영화 추천 사이트를 만드는 관통프로젝트를 진행하며 배운점을 기술한다.



## 1.1 django

> django에서 배운점

### 랜덤하게 select하기

`order_by`에 `'?'`를 인자로 넣으면 임의 순서로 select를 하게 된다. 이 때 인덱스 슬라이싱을 하면 select하고 싶은 갯수 또한 정할 수 있다.

```python
movies = Movie.objects.all().order_by('?')
```



### query_set 합치기

`union` 혹은 `|`를 사용하여 같은 모델의 query_set을 합칠 수 있다. (위의 방법으로 슬라이싱을 한 경우 합칠 수 없음에 주의하자)

```python
merge_movies = drama_movies | action_movies
```



### ManyToMany field 넣기

ManyToMany 필드의 경우, 추가하기위한 object를 만들고 내용을 채워 더해주어야 한다. 추가하기 전에 가 ManyToMany 필드가 아닌 다른 필드들을 넣고 `save()`해주어야 한다. (예제에서의 Movie와 Genre는 M:N관계이다)

```python
genre = Genre(name='드라마')
genre.save()
movie.genres.add(genre)
```



### fixtures 사용하기

fixture를 이용해 django의 DB를 json으로, json을 DB에 넣을 수 있다.

- DB -> json (dump)

```bash
$ python manage.py dumpdata {appname}.{modelname} --indent 2 > {fixturename}.json
# app내에 fixtures 폴더를 만들고 fixture를 넣어주도록 하자
```

- json -> DB (load)

```bash
$ python manage.py loaddate {loaddata} {appname}/fixtures/{fixturename}.json
```



### DB 데이터 삭제시 주의점

DB의 내용을 삭제하려면 각 app내의 `migrations`폴더를 `init.py`만을 남긴채 제거하고 `db.sqlite3`를 삭제해주면 된다. 하지만 가끔 데이터가 DB에서 **삭제되지 않는 경우**가 있는데, 대부분이 **서버를 돌리거나** (runserver) **shell_plus를 사용**하는 경우였다. 데이터를 삭제할 때는 위의 상황이 아닌지 체크하자.



## 1.2 vue



## 1.3 git